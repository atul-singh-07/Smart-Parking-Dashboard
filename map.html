<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Parking | Live Basement Map</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins', sans-serif;
}

body{
background:linear-gradient(135deg,#000000,#111111,#1a1a1a);
color:white;
min-height:100vh;
}

/* NAV */
nav{
display:flex;
justify-content:space-between;
align-items:center;
padding:20px 80px;
background:#000;
border-bottom:1px solid #222;
}

.logo{
font-size:24px;
font-weight:700;
color:#f4c430;
}

.nav-links{
list-style:none;
display:flex;
gap:35px;
}

.nav-links li a{
text-decoration:none;
color:white;
font-weight:500;
transition:0.3s;
}

.nav-links li a:hover{
color:#f4c430;
}

h1{
margin-top:50px;
font-size:36px;
color:#f4c430;
text-align:center;
}

.status-box{
text-align:center;
margin-top:15px;
font-size:18px;
}

/* GRID */
.grid{
display:grid;
grid-template-columns:repeat(2,220px);
gap:60px;
justify-content:center;
margin-top:70px;
}

/* SLOT */
.slot{
height:200px;
background:#111;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
border-radius:25px;
border:2px solid #333;
transition:0.4s;
box-shadow:0 0 15px rgba(0,0,0,0.6);
}

.car{
font-size:75px;
transition:0.4s;
}

.slot-text{
margin-top:12px;
font-size:16px;
font-weight:600;
letter-spacing:1px;
}

/* AVAILABLE */
.available{
background:#0f3d1f;
border:2px solid #00ff88;
box-shadow:0 0 25px #00ff88;
}

.available .car{
color:#00ff88;
}

/* OCCUPIED */
.booked{
background:#3d0f0f;
border:2px solid #ff0033;
box-shadow:0 0 25px #ff0033;
}

.booked .car{
color:#ff0033;
}

@media(max-width:600px){
.grid{
grid-template-columns:repeat(1,220px);
}
}
</style>
</head>

<body>

<nav>
<div class="logo">Smart Parking</div>
<ul class="nav-links">
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="booking.html">Booking</a></li>
<li><a href="map.html">Map</a></li>
<li><a href="login.html">Login</a></li>
<li><a href="system.html">System Architecture</a></li>
</ul>
</nav>

<h1>Live Prototype</h1>

<div class="status-box">
Total Slots: <span id="totalSlots">0</span> |
Available: <span id="availableSlots">0</span>
</div>

<div class="grid">

<div class="slot" id="slot1">
<div class="car">ðŸš—</div>
<div class="slot-text">SLOT 1</div>
</div>

<div class="slot" id="slot2">
<div class="car">ðŸš—</div>
<div class="slot-text">SLOT 2</div>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

/* YOUR FIREBASE CONFIG */
const firebaseConfig = {
apiKey:"AIzaSyDPPCKJM6WQvsVFisQ5SbqBgvWuSt9AYtQ",
authDomain:"smart-parking-system-1cf2a.firebaseapp.com",
databaseURL:"https://smart-parking-system-1cf2a-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"smart-parking-system-1cf2a",
storageBucket:"smart-parking-system-1cf2a.firebasestorage.app",
messagingSenderId:"1006250338223",
appId:"1:1006250338223:web:fd1d57aadeb59c4827315a"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

/* DATABASE PATH */
const parkingRef = ref(db, "locations/ambience_mall");

/* REALTIME LISTENER */
onValue(parkingRef, (snapshot) => {

console.log("Firebase Data:", snapshot.val());

const data = snapshot.val();

if (!data) {
console.log("No data found at this path!");
return;
}

document.getElementById("totalSlots").innerText = data.totalSlots;
document.getElementById("availableSlots").innerText = data.availableSlots;

updateSlot("slot1", data.slots.slot1);
updateSlot("slot2", data.slots.slot2);

}, (error) => {
console.error("Firebase Error:", error);
});

/* UPDATE SLOT */
function updateSlot(slotId, value) {

const slotElement = document.getElementById(slotId);
const text = slotElement.querySelector(".slot-text");

if (value === 1) {
slotElement.classList.remove("available");
slotElement.classList.add("booked");
text.innerText = slotId.toUpperCase() + " - OCCUPIED";
} else {
slotElement.classList.remove("booked");
slotElement.classList.add("available");
text.innerText = slotId.toUpperCase() + " - AVAILABLE";
}

}

</script>

</body>
</html>
